{% extends 'home.html' %}
{% load static%}
{% block title %}Perfil | {% endblock title %}
{% block subcontenedor %}
<h4 class="display-7">Perfil</h4>

<div class="row g-2" style="margin: 10px;">
    <div class="col-md-6">
        <form class="was-validated" method="POST" id="formModificaroUsuario" name="formModificaroUsuario">
            {% csrf_token %}
            <div class="mb-3">
                <label for="txtNombres" class="form-label">Nombres y apellidos</label>
                <input type="text" value="{{ unUsuario.persona.nombres_apellidos }}" form="formModificaroUsuario" class="form-control" id="txtNombres" name="txtNombres" placeholder="nombres" maxlength="70" required />
            </div>
            <div class="mb-3">
                <label for="txtCedula" class="form-label">Cédula</label>
                <input type="text" value="{{ unUsuario.persona.cedula }}" form="formModificaroUsuario" class="form-control" id="txtCedula" name="txtCedula" placeholder="cédula" maxlength="10" required />
            </div>
            <div class="mb-3">
                <label for="dtmFechaNaci" class="form-label">Fecha de nacimiento</label>
                <input type="date" min="1960-01-01" max="2023-12-31" value="{{ unUsuario.persona.fecha_nacimiento }}" form="formModificaroUsuario" class="form-control" id="dtmFechaNaci" name="dtmFechaNaci" required />
            </div>
            <div class="mb-3">
                <label for="txtUsuario" class="form-label">Usuario</label>
                <input type="text" value="{{ unUsuario.nom_usuario }}" form="formModificaroUsuario" class="form-control" id="txtUsuario" name="txtUsuario" placeholder="usuario" maxlength="20" required />
            </div>
            <div class="mb-3">
                <label for="txtClave" class="form-label">Contraseña</label>
                <input type="password" form="formModificaroUsuario" class="form-control" id="txtClave" name="txtClave" placeholder="***********" />
            </div>
            <div class="mb-3">
                <label for="txtClave2" class="form-label">Repita la contraseña</label>
                <input type="password" form="formModificaroUsuario" class="form-control" id="txtClave2" name="txtClave2" placeholder="***********" />
            </div>
            <button id="btnModificarCuenta" class="btn btn-success" type="submit" form="formModificaroUsuario"><i class="fas fa-save"></i> Guardar cambios</button>
        </form>
    </div>
    <div class="col-md-6">
        <form method="POST" class="text-center mt-5" id="formGuardarFoto" enctype="multipart/form-data" >
            {% csrf_token %}
            <!--Contenedor de la foto-->
            {% if request.session.fotoPerfil %}
            <img id="foto-usuario" src="{{ request.session.fotoPerfil }}" class="img-thumbnail img-fluid mt-5" name="foto" style="max-height: 400px;">
            {% else %}
            <img id="foto-usuario" src="{% static 'img/doctor.jpg' %}" class="img-thumbnail img-fluid mt-5" name="foto" style="max-height: 400px;">
            {% endif %}
            <!--Contenedor de opciones de foto-->
            <div>
              <label for="nuestroinput" class="btn btn-primary btn-sm"><i class="fas fa-upload"></i> Subir</label>
              <input class="btn btn-success btn-sm subirfoto" style="overflow: hidden; opacity: 0;width: 0.1px; height: 0.1px;" type="file" name="imgFoto" id="nuestroinput" accept="image/*" onchange="previewimagen(this);">
              <button type="submit" class="btn btn-success btn-sm" id="btnGuardarFoto"><i class="fas fa-save"></i> Guardar foto</button>
            </div>
          </form>
    </div>
</div>
{% endblock %} 
{% block js %}
<script src="{% static '/dainattor/js/persona.js'%}"></script>
{% endblock %}  