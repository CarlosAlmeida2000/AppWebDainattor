{% extends 'home.html' %}
{% load static %}

{% block title %}Perfil - {% endblock title %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/dainattor/panel-contenido.css' %}" />
{% endblock css %}

{% block content %}
<div class="titulo">Perfil</div>
<div class="row">
    <div class="col-md-5 card border-sombra p-4 left-6">
        <form class="was-validated" method="POST" id="formModificaroUsuario" name="formModificaroUsuario">
            {% csrf_token %}
            <div class="mb-3">
                <label for="txtNombres" class="form-label">Nombres y apellidos</label>
                <input type="text" value="{{ unUsuario.persona.nombres_apellidos }}" form="formModificaroUsuario"
                    class="form-control" id="txtNombres" name="txtNombres" placeholder="nombres" maxlength="70"
                    required />
            </div>
            <div class="mb-4">
                <label for="txtCedula" class="form-label">Cédula</label>
                <div class="row">
                    <input type="password" value="{{ unUsuario.persona.cedula }}" form="formModificaroUsuario"
                    class="form-control col mx-3" id="txtCedula" name="txtCedula" placeholder="cédula" maxlength="10" required />
                    <button id="verClave" name="verClave" class="btn btn-primary col-sm-1 mx-3 verClave" onclick="javascript:mostrarValor(txtCedula);" type="button"><i class="fas fa-eye"></i></button>
                </div>
            </div>
            <div class="mb-3">
                <label for="dtmFechaNaci" class="form-label">Fecha de nacimiento</label>
                <input type="date" min="1960-01-01" max="2023-12-31" value="{{ unUsuario.persona.fecha_nacimiento }}"
                    form="formModificaroUsuario" class="form-control" id="dtmFechaNaci" name="dtmFechaNaci" required />
            </div>
            <div class="mb-3">
                <label for="txtUsuario" class="form-label">Usuario</label>
                <input type="text" value="{{ unUsuario.nom_usuario }}" form="formModificaroUsuario" class="form-control"
                    id="txtUsuario" name="txtUsuario" placeholder="usuario" maxlength="20" required />
            </div>
            <div class="mb-3">
                <label for="txtClave" class="form-label">Contraseña</label>
                <div class="row">
                    <input type="password" form="formModificaroUsuario" class="form-control col mx-3" id="txtClave" name="txtClave"
                    placeholder="***********" />
                    <button id="verClave" name="verClave" class="btn btn-primary col-sm-1 mx-3 verClave" onclick="javascript:mostrarValor(txtClave);" type="button"><i class="fas fa-eye"></i></button>
                </div>
            </div>
            <div class="mb-3">
                <label for="txtClave2" class="form-label">Repita la contraseña</label>
                <div class="row">
                    <input type="password" form="formModificaroUsuario" class="form-control col mx-3" id="txtClave2" name="txtClave2"
                    placeholder="***********" />
                <button id="verClave" name="verClave" class="btn btn-primary col-sm-1 mx-3 verClave" onclick="javascript:mostrarValor(txtClave2);" type="button"><i class="fas fa-eye"></i></button>
                </div>
            </div>
            <button id="btnModificarCuenta" class="btn btn-success" type="submit" form="formModificaroUsuario"><i
                    class="fas fa-save"></i> Guardar cambios</button>
        </form>
    </div>
    <div class="col-md-5 card border-sombra left-6 mx-5">
        <form method="POST" class="text-center mt-5" id="formGuardarFoto" enctype="multipart/form-data">
            {% csrf_token %}
            {% if request.session.fotoPerfil %}
            <img id="foto-usuario" src="{{ request.session.fotoPerfil }}" class="img-thumbnail img-fluid mt-5"
                name="foto" style="max-height: 400px;">
            {% else %}
            <img id="foto-usuario" src="{% static 'img/doctor.jpg' %}" class="img-thumbnail img-fluid mt-5" name="foto"
                style="max-height: 400px;">
            {% endif %}
            <div>
                <label for="nuestroinput" class="btn btn-primary btn-sm mt-2"><i class="fas fa-upload"></i>
                    Subir</label>
                <input class="btn btn-success btn-sm subirfoto"
                    style="overflow: hidden; opacity: 0;width: 0.1px; height: 0.1px;" type="file" name="imgFoto"
                    id="nuestroinput" accept="image/*" onchange="previewimagen(this);">
                <button type="submit" class="btn btn-success btn-sm" id="btnGuardarFoto"><i class="fas fa-save"></i>
                    Guardar foto</button>
            </div>
        </form>
    </div>
</div>
{% endblock content %}
{% block js %}
<script src="{% static '/js/dainattor/persona.js'%}"></script>
{% endblock %}